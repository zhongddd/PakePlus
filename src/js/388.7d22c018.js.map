{"version":3,"file":"js/388.7d22c018.js","mappings":"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","sources":["webpack://client/./src/views/CozeTestPage.vue","webpack://client/./src/views/CozeTestPage.vue?2e58"],"sourcesContent":["<template>\r\n  <div class=\"coze-test-page\">\r\n    <h1>Coze工作流测试页面</h1>\r\n    \r\n    <el-card class=\"api-settings-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>Coze API 设置</span>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-alert\r\n        v-if=\"!hasApiSettings\"\r\n        type=\"warning\"\r\n        show-icon\r\n        :closable=\"false\"\r\n        style=\"margin-bottom: 15px;\"\r\n      >\r\n        <p>尚未配置API设置，请先在\"设置-API设置\"页面中进行配置</p>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"goToSettings\" style=\"margin-top: 8px;\">\r\n          前往设置页面\r\n        </el-button>\r\n      </el-alert>\r\n      \r\n      <el-alert\r\n        v-else\r\n        type=\"success\"\r\n        show-icon\r\n        :closable=\"false\"\r\n      >\r\n        <p>已成功加载全局API设置</p>\r\n        <p>API令牌: {{ maskToken(apiSettings.cozeApiToken) }}</p>\r\n        <p>工作流ID: {{ apiSettings.workflowId }}</p>\r\n        <p v-if=\"apiSettings.botId\">智能体ID: {{ apiSettings.botId }}</p>\r\n      </el-alert>\r\n    </el-card>\r\n    \r\n    <el-divider content-position=\"center\">\r\n      <span style=\"font-size: 16px; font-weight: bold;\">工作流测试</span>\r\n    </el-divider>\r\n    \r\n    <div class=\"info-block\">\r\n      <el-alert\r\n        type=\"info\"\r\n        show-icon\r\n        :closable=\"false\"\r\n      >\r\n        <h4>使用说明</h4>\r\n        <p>此测试页面使用了Coze API的异步工作流执行功能，适用于执行时间较长的工作流。</p>\r\n        <p>1. 使用全局API设置（从\"设置-API设置\"中获取）</p>\r\n        <p>2. 在测试区输入工作流参数并执行</p>\r\n        <p>3. 异步执行开始后，可以随时检查执行结果</p>\r\n        <p>4. 如果工作流未完成，系统会每10秒自动检查一次，直到完成</p>\r\n      </el-alert>\r\n    </div>\r\n    \r\n    <!-- 工作流测试组件 -->\r\n    <CozeWorkflowTester :api-settings=\"apiSettings\" @result=\"handleResult\" />\r\n    \r\n    <!-- 执行历史 -->\r\n    <el-collapse v-if=\"executionHistory.length > 0\" class=\"history-section\">\r\n      <el-collapse-item title=\"执行历史记录\" name=\"history\">\r\n        <el-timeline>\r\n          <el-timeline-item\r\n            v-for=\"(item, index) in executionHistory\"\r\n            :key=\"index\"\r\n            :timestamp=\"item.timestamp\"\r\n            :type=\"item.success ? 'success' : 'warning'\"\r\n          >\r\n            <el-card>\r\n              <h4>{{ item.title }}</h4>\r\n              <p>{{ item.message }}</p>\r\n            </el-card>\r\n          </el-timeline-item>\r\n        </el-timeline>\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { useRouter } from 'vue-router';\r\nimport CozeWorkflowTester from '../components/CozeWorkflowTester.vue';\r\n\r\nexport default {\r\n  name: 'CozeTestPage',\r\n  components: {\r\n    CozeWorkflowTester\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    \r\n    // API设置\r\n    const apiSettings = reactive({\r\n      cozeApiToken: '',\r\n      workflowId: '',\r\n      botId: ''\r\n    });\r\n    \r\n    // 判断是否有API设置\r\n    const hasApiSettings = computed(() => {\r\n      return apiSettings.cozeApiToken && apiSettings.workflowId;\r\n    });\r\n    \r\n    // 执行历史\r\n    const executionHistory = ref([]);\r\n    \r\n    // 从全局设置中加载API设置\r\n    const loadSettings = () => {\r\n      try {\r\n        const savedSettings = localStorage.getItem('apiSettings');\r\n        if (savedSettings) {\r\n          const parsed = JSON.parse(savedSettings);\r\n          \r\n          // 映射保存的设置到正确的字段名\r\n          if (parsed.cozeApiToken) {\r\n            apiSettings.cozeApiToken = parsed.cozeApiToken;\r\n          }\r\n          \r\n          if (parsed.cozeWorkflowId) {\r\n            apiSettings.workflowId = parsed.cozeWorkflowId;\r\n          }\r\n          \r\n          if (parsed.cozeBotId) {\r\n            apiSettings.botId = parsed.cozeBotId;\r\n          }\r\n          \r\n          if (apiSettings.cozeApiToken && apiSettings.workflowId) {\r\n            addToHistory('加载API设置', '成功从全局设置加载API配置', true);\r\n          } else {\r\n            ElMessage.warning('API设置不完整，请在设置页面完成配置');\r\n          }\r\n        } else {\r\n          ElMessage.warning('未找到API设置，请先在设置页面配置');\r\n        }\r\n      } catch (error) {\r\n        console.error('加载API设置失败:', error);\r\n        ElMessage.error('加载API设置失败');\r\n      }\r\n    };\r\n    \r\n    // 跳转到设置页面\r\n    const goToSettings = () => {\r\n      router.push({\r\n        path: '/settings',\r\n        query: { tab: 'api' }\r\n      });\r\n    };\r\n    \r\n    // 掩码显示令牌\r\n    const maskToken = (token) => {\r\n      if (!token) return '';\r\n      if (token.length <= 10) return token;\r\n      return token.substring(0, 5) + '...' + token.substring(token.length - 5);\r\n    };\r\n    \r\n    // 处理工作流执行结果\r\n    const handleResult = (result) => {\r\n      if (result && result.isCompleted) {\r\n        addToHistory(\r\n          '工作流执行完成', \r\n          `状态: ${result.status}, 输出长度: ${result.parsedOutput ? result.parsedOutput.length : 0} 字符`, \r\n          true\r\n        );\r\n      }\r\n    };\r\n    \r\n    // 添加到执行历史\r\n    const addToHistory = (title, message, success = true) => {\r\n      const now = new Date();\r\n      \r\n      executionHistory.value.unshift({\r\n        title,\r\n        message,\r\n        success,\r\n        timestamp: `${now.toLocaleDateString()} ${now.toLocaleTimeString()}`\r\n      });\r\n      \r\n      // 限制历史记录数量\r\n      if (executionHistory.value.length > 10) {\r\n        executionHistory.value = executionHistory.value.slice(0, 10);\r\n      }\r\n    };\r\n    \r\n    // 组件挂载时加载设置\r\n    onMounted(() => {\r\n      loadSettings();\r\n    });\r\n    \r\n    return {\r\n      apiSettings,\r\n      hasApiSettings,\r\n      executionHistory,\r\n      handleResult,\r\n      goToSettings,\r\n      maskToken\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.coze-test-page {\r\n  padding: 20px;\r\n}\r\n\r\nh1 {\r\n  margin-bottom: 20px;\r\n  font-size: 24px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.api-settings-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.setting-description {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n}\r\n\r\n.info-block {\r\n  margin: 20px 0;\r\n}\r\n\r\n.history-section {\r\n  margin-top: 30px;\r\n}\r\n</style> ","import { render } from \"./CozeTestPage.vue?vue&type=template&id=67786ca9&scoped=true\"\nimport script from \"./CozeTestPage.vue?vue&type=script&lang=js\"\nexport * from \"./CozeTestPage.vue?vue&type=script&lang=js\"\n\nimport \"./CozeTestPage.vue?vue&type=style&index=0&id=67786ca9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67786ca9\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","header","_withCtx","_cache","$setup","hasApiSettings","_createBlock","_component_el_alert","type","closable","_toDisplayString","maskToken","apiSettings","cozeApiToken","workflowId","botId","_hoisted_2","style","_component_el_button","size","onClick","goToSettings","_component_el_divider","_hoisted_3","_component_CozeWorkflowTester","onResult","handleResult","executionHistory","length","_component_el_collapse","_component_el_collapse_item","title","name","_component_el_timeline","_Fragment","_renderList","item","index","_component_el_timeline_item","key","timestamp","success","message","components","CozeWorkflowTester","setup","router","useRouter","reactive","computed","ref","loadSettings","savedSettings","localStorage","getItem","parsed","JSON","parse","cozeWorkflowId","cozeBotId","addToHistory","ElMessage","warning","error","console","push","path","query","tab","token","substring","result","isCompleted","status","parsedOutput","now","Date","value","unshift","toLocaleDateString","toLocaleTimeString","slice","onMounted","__exports__","render"],"sourceRoot":""}