"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[7],{9538:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var n=l(641),o=l(33);const s={class:"coze-test-page"},i={key:0},a={class:"info-block"};function u(e,t,l,u,c,p){const k=(0,n.g2)("el-button"),r=(0,n.g2)("el-alert"),g=(0,n.g2)("el-card"),d=(0,n.g2)("el-divider"),f=(0,n.g2)("CozeWorkflowTester"),I=(0,n.g2)("el-timeline-item"),h=(0,n.g2)("el-timeline"),_=(0,n.g2)("el-collapse-item"),m=(0,n.g2)("el-collapse");return(0,n.uX)(),(0,n.CE)("div",s,[t[6]||(t[6]=(0,n.Lk)("h1",null,"Coze工作流测试页面",-1)),(0,n.bF)(g,{class:"api-settings-card"},{header:(0,n.k6)(()=>t[0]||(t[0]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"Coze API 设置")],-1)])),default:(0,n.k6)(()=>[u.hasApiSettings?((0,n.uX)(),(0,n.Wv)(r,{key:1,type:"success","show-icon":"",closable:!1},{default:(0,n.k6)(()=>[t[3]||(t[3]=(0,n.Lk)("p",null,"已成功加载全局API设置",-1)),(0,n.Lk)("p",null,"API令牌: "+(0,o.v_)(u.maskToken(u.apiSettings.cozeApiToken)),1),(0,n.Lk)("p",null,"工作流ID: "+(0,o.v_)(u.apiSettings.workflowId),1),u.apiSettings.botId?((0,n.uX)(),(0,n.CE)("p",i,"智能体ID: "+(0,o.v_)(u.apiSettings.botId),1)):(0,n.Q3)("",!0)]),_:1,__:[3]})):((0,n.uX)(),(0,n.Wv)(r,{key:0,type:"warning","show-icon":"",closable:!1,style:{"margin-bottom":"15px"}},{default:(0,n.k6)(()=>[t[2]||(t[2]=(0,n.Lk)("p",null,'尚未配置API设置，请先在"设置-API设置"页面中进行配置',-1)),(0,n.bF)(k,{type:"primary",size:"small",onClick:u.goToSettings,style:{"margin-top":"8px"}},{default:(0,n.k6)(()=>t[1]||(t[1]=[(0,n.eW)(" 前往设置页面 ")])),_:1,__:[1]},8,["onClick"])]),_:1,__:[2]}))]),_:1}),(0,n.bF)(d,{"content-position":"center"},{default:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.Lk)("span",{style:{"font-size":"16px","font-weight":"bold"}},"工作流测试",-1)])),_:1,__:[4]}),(0,n.Lk)("div",a,[(0,n.bF)(r,{type:"info","show-icon":"",closable:!1},{default:(0,n.k6)(()=>t[5]||(t[5]=[(0,n.Lk)("h4",null,"使用说明",-1),(0,n.Lk)("p",null,"此测试页面使用了Coze API的异步工作流执行功能，适用于执行时间较长的工作流。",-1),(0,n.Lk)("p",null,'1. 使用全局API设置（从"设置-API设置"中获取）',-1),(0,n.Lk)("p",null,"2. 在测试区输入工作流参数并执行",-1),(0,n.Lk)("p",null,"3. 异步执行开始后，可以随时检查执行结果",-1),(0,n.Lk)("p",null,"4. 如果工作流未完成，系统会每10秒自动检查一次，直到完成",-1)])),_:1,__:[5]})]),(0,n.bF)(f,{"api-settings":u.apiSettings,onResult:u.handleResult},null,8,["api-settings","onResult"]),u.executionHistory.length>0?((0,n.uX)(),(0,n.Wv)(m,{key:0,class:"history-section"},{default:(0,n.k6)(()=>[(0,n.bF)(_,{title:"执行历史记录",name:"history"},{default:(0,n.k6)(()=>[(0,n.bF)(h,null,{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.executionHistory,(e,t)=>((0,n.uX)(),(0,n.Wv)(I,{key:t,timestamp:e.timestamp,type:e.success?"success":"warning"},{default:(0,n.k6)(()=>[(0,n.bF)(g,null,{default:(0,n.k6)(()=>[(0,n.Lk)("h4",null,(0,o.v_)(e.title),1),(0,n.Lk)("p",null,(0,o.v_)(e.message),1)]),_:2},1024)]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0)])}l(4114);var c=l(953),p=l(163),k=l(5220),r=l(1042),g={name:"CozeTestPage",components:{CozeWorkflowTester:r.A},setup(){const e=(0,k.rd)(),t=(0,c.Kh)({cozeApiToken:"",workflowId:"",botId:""}),l=(0,n.EW)(()=>t.cozeApiToken&&t.workflowId),o=(0,c.KR)([]),s=()=>{try{const e=localStorage.getItem("apiSettings");if(e){const l=JSON.parse(e);l.cozeApiToken&&(t.cozeApiToken=l.cozeApiToken),l.cozeWorkflowId&&(t.workflowId=l.cozeWorkflowId),l.cozeBotId&&(t.botId=l.cozeBotId),t.cozeApiToken&&t.workflowId?r("加载API设置","成功从全局设置加载API配置",!0):p.nk.warning("API设置不完整，请在设置页面完成配置")}else p.nk.warning("未找到API设置，请先在设置页面配置")}catch(e){console.error("加载API设置失败:",e),p.nk.error("加载API设置失败")}},i=()=>{e.push({path:"/settings",query:{tab:"api"}})},a=e=>e?e.length<=10?e:e.substring(0,5)+"..."+e.substring(e.length-5):"",u=e=>{e&&e.isCompleted&&r("工作流执行完成",`状态: ${e.status}, 输出长度: ${e.parsedOutput?e.parsedOutput.length:0} 字符`,!0)},r=(e,t,l=!0)=>{const n=new Date;o.value.unshift({title:e,message:t,success:l,timestamp:`${n.toLocaleDateString()} ${n.toLocaleTimeString()}`}),o.value.length>10&&(o.value=o.value.slice(0,10))};return(0,n.sV)(()=>{s()}),{apiSettings:t,hasApiSettings:l,executionHistory:o,handleResult:u,goToSettings:i,maskToken:a}}},d=l(6262);const f=(0,d.A)(g,[["render",u],["__scopeId","data-v-67786ca9"]]);var I=f}}]);
//# sourceMappingURL=7.c5810dea.js.map