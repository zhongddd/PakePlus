{"version":3,"file":"js/911.1bae7e86.js","mappings":"yKACOA,MAAM,mB,GAIJA,MAAM,Y,iCAeNA,MAAM,iB,GAQJA,MAAM,gB,SAgB0BA,MAAM,gB,wBActCA,MAAM,iB,SASMA,MAAM,oB,cAoBdA,MAAM,e,GAKRA,MAAM,e,2UA3FjBC,EAAAA,EAAAA,IAsHM,MAtHNC,EAsHM,C,eArHJC,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KAGbA,EAAAA,EAAAA,IAYM,MAZNC,EAYM,CAVIC,EAAAC,aAAeD,EAAAC,YAAYC,e,WADnCC,EAAAA,EAAAA,IAUWC,EAAA,C,MARTC,KAAK,OACJC,UAAU,EACX,gB,kBACD,IAEC,C,qBAFD,cAEaN,EAAAC,YAAYC,e,WAAxBN,EAAAA,EAAAA,IAA6F,OAAAW,EAAvD,WAAOC,EAAAA,EAAAA,IAAGC,EAAAC,UAAUV,EAAAC,YAAYC,eAAY,K,eACtEF,EAAAC,YAAYU,a,WAAxBf,EAAAA,EAAAA,IAAoF,OAAAgB,EAAhD,iBAAaJ,EAAAA,EAAAA,IAAGR,EAAAC,YAAYU,YAAU,K,eAC9DX,EAAAC,YAAYY,Q,WAAxBjB,EAAAA,EAAAA,IAAqE,OAAAkB,EAAtC,YAAQN,EAAAA,EAAAA,IAAGR,EAAAC,YAAYY,OAAK,K,kDAK/Df,EAAAA,EAAAA,IAmBM,MAnBNiB,EAmBM,C,aAlBJjB,EAAAA,EAAAA,IAA+B,OAA1BH,MAAM,SAAQ,UAAM,KACzBqB,EAAAA,EAAAA,IAKEC,EAAA,C,WAJSR,EAAAS,U,qCAAAT,EAAAS,UAASC,GAClBd,KAAK,WACJe,KAAM,EACPC,YAAY,sB,wBAEdvB,EAAAA,EAAAA,IAUM,MAVNwB,EAUM,EATJN,EAAAA,EAAAA,IAOYO,EAAA,CANVlB,KAAK,UACJmB,QAAOf,EAAAgB,YACPC,QAASjB,EAAAiB,QACTC,UAAW3B,EAAAC,cAAgBD,EAAAC,YAAYC,eAAiBF,EAAAC,YAAYU,Y,kBACtE,IAEDiB,EAAA,KAAAA,EAAA,K,QAFC,c,iDAGDZ,EAAAA,EAAAA,IAA4CO,EAAA,CAAhCC,QAAOf,EAAAoB,WAAS,C,iBAAE,IAAED,EAAA,KAAAA,EAAA,K,QAAF,S,gCAIlCZ,EAAAA,EAAAA,IAAuDc,EAAA,CAA3C,mBAAiB,UAAQ,C,iBAAC,IAAIF,EAAA,KAAAA,EAAA,K,QAAJ,W,aAG3BnB,EAAAsB,iBAAiBC,Y,WAA5BpC,EAAAA,EAAAA,IAoBM,MApBNqC,EAoBM,EAnBJjB,EAAAA,EAAAA,IAWWZ,EAAA,CAVTC,KAAK,OACJC,UAAU,EACX,gB,kBAEA,IAAkB,C,aAAlBR,EAAAA,EAAAA,IAAkB,SAAf,eAAW,KACdA,EAAAA,EAAAA,IAA6C,SAA1C,UAAMU,EAAAA,EAAAA,IAAGC,EAAAsB,iBAAiBC,WAAS,IACtClC,EAAAA,EAAAA,IAAyD,SAAtD,UAAMU,EAAAA,EAAAA,IAAGC,EAAAyB,WAAWzB,EAAAsB,iBAAiBI,YAAS,GACxC1B,EAAAsB,iBAAiBK,W,WAA1BxC,EAAAA,EAAAA,IAEI,IAAAyC,EAAA,EADFvC,EAAAA,EAAAA,IAA+D,KAA3DwC,KAAM7B,EAAAsB,iBAAiBK,SAAUG,OAAO,UAAS,SAAM,EAAAC,O,+BAI/D1C,EAAAA,EAAAA,IAKM,MALN2C,EAKM,EAJJzB,EAAAA,EAAAA,IAEYO,EAAA,CAFDlB,KAAK,UAAWmB,QAAOf,EAAAiC,iBAAmBhB,QAASjB,EAAAkC,gB,kBAAgB,IAE9Ef,EAAA,KAAAA,EAAA,K,QAF8E,e,sCAG9EZ,EAAAA,EAAAA,IAAmDO,EAAA,CAAvCC,QAAOf,EAAAmC,kBAAgB,C,iBAAE,IAAEhB,EAAA,KAAAA,EAAA,K,QAAF,S,gDAK9BnB,EAAAoC,S,WAAXjD,EAAAA,EAAAA,IAiCM,MAjCNkD,EAiCM,EAhCJ9B,EAAAA,EAAAA,IAekB+B,EAAA,CAfDC,MAAM,OAAQC,OAAQ,EAAGC,OAAA,I,kBACxC,IAIuB,EAJvBlC,EAAAA,EAAAA,IAIuBmC,EAAA,CAJDC,MAAM,MAAI,C,iBAC9B,IAES,EAFTpC,EAAAA,EAAAA,IAESqC,EAAA,CAFAhD,KAAMI,EAAAoC,OAAOS,YAAc,UAAY,W,kBAC9C,IAA2B,E,iBAAxB7C,EAAAoC,OAAOU,QAAU,MAAJ,K,yBAGQ9C,EAAAoC,OAAOW,a,WAAnCrD,EAAAA,EAAAA,IAEuBgD,EAAA,C,MAFwBC,MAAM,Q,kBACnD,IAA0C,E,iBAAvC3C,EAAAyB,WAA+B,IAApBzB,EAAAoC,OAAOW,aAAU,K,uBAEL/C,EAAAoC,OAAOY,a,WAAnCtD,EAAAA,EAAAA,IAEuBgD,EAAA,C,MAFwBC,MAAM,Q,kBACnD,IAA0C,E,iBAAvC3C,EAAAyB,WAA+B,IAApBzB,EAAAoC,OAAOY,aAAU,K,uBAELhD,EAAAoC,OAAOT,W,WAAnCjC,EAAAA,EAAAA,IAEuBgD,EAAA,C,MAFsBC,MAAM,Q,kBACjD,IAAqD,EAArDtD,EAAAA,EAAAA,IAAqD,KAAjDwC,KAAM7B,EAAAoC,OAAOT,SAAUG,OAAO,UAAS,SAAM,EAAAmB,K,+BAIfjD,EAAAoC,OAAOc,e,WAA7CxD,EAAAA,EAAAA,IAQUyD,EAAA,C,MARDjE,MAAM,kB,CACFkE,QAAMC,EAAAA,EAAAA,IACf,IAGM,EAHNhE,EAAAA,EAAAA,IAGM,MAHNiE,EAGM,C,eAFJjE,EAAAA,EAAAA,IAAiB,YAAX,QAAI,KACVkB,EAAAA,EAAAA,IAA0DO,EAAA,CAA/CyC,KAAK,QAASxC,QAAOf,EAAAwD,Y,kBAAY,IAAErC,EAAA,MAAAA,EAAA,M,QAAF,S,iDAGhD,IAAwD,EAAxD9B,EAAAA,EAAAA,IAAwD,MAAxDoE,GAAwD1D,EAAAA,EAAAA,IAA5BC,EAAAoC,OAAOc,cAAY,K,uBAG9BlD,EAAAoC,OAAOsB,S,WAA1BhE,EAAAA,EAAAA,IAIciE,EAAA,C,MAJoBzE,MAAM,c,kBACtC,IAEmB,EAFnBqB,EAAAA,EAAAA,IAEmBqD,EAAA,CAFDrB,MAAM,QAAM,C,iBAC5B,IAA8B,EAA9BlD,EAAAA,EAAAA,IAA8B,YAAAU,EAAAA,EAAAA,IAAtBC,EAAAoC,OAAOsB,QAAM,K,kDAOlB1D,EAAAsB,iBAAiBC,WAAcvB,EAAAoC,Q,4BADxC1C,EAAAA,EAAAA,IAGEmE,EAAA,C,MADAC,YAAY,aAKN9D,EAAA+D,Q,WADRrE,EAAAA,EAAAA,IASWC,EAAA,C,MAPTC,KAAK,QACJC,UAAU,EACX,eACCmE,QAAK7C,EAAA,KAAAA,EAAA,GAAAT,GAAEV,EAAA+D,MAAQ,IAChBE,MAAA,uB,kBAEA,IAAW,E,iBAARjE,EAAA+D,OAAK,K,yDAUd,GACEG,KAAM,qBACNC,MAAO,CACL3E,YAAa,CACXI,KAAMwE,OACNC,UAAU,EACVC,QAASA,KAAA,CAAS,KAGtBC,MAAO,CAAC,UACRC,KAAAA,CAAML,GAAO,KAAEM,IAEb,MAAMhE,GAAYiE,EAAAA,EAAAA,IAAI,IAGhBzD,GAAUyD,EAAAA,EAAAA,KAAI,GACdxC,GAAiBwC,EAAAA,EAAAA,KAAI,GACrBX,GAAQW,EAAAA,EAAAA,IAAI,IAGZtC,GAASsC,EAAAA,EAAAA,IAAI,MACbpD,GAAmBqD,EAAAA,EAAAA,IAAS,CAChCpD,UAAW,GACXrB,WAAY,GACZwB,UAAW,KACXC,SAAU,KAIZ,IAAIiD,EAAmB,KAGvB,MAAMnD,EAAcoD,IAClB,IAAKA,EAAW,MAAO,IACvB,MAAMC,EAAO,IAAIC,KAAKF,GACtB,MAAO,GAAGC,EAAKE,wBAAwBF,EAAKG,wBAIxChF,EAAaiF,GACZA,EACDA,EAAMC,QAAU,GAAWD,EACxBA,EAAME,UAAU,EAAG,GAAK,MAAQF,EAAME,UAAUF,EAAMC,OAAS,GAFnD,GAMfnE,EAAcqE,UAElB,GAAK5E,EAAU6E,MAAMC,OAMrB,GAAKpB,EAAM3E,aAAgB2E,EAAM3E,YAAYC,cAAiB0E,EAAM3E,YAAYU,WAKhF,IACEe,EAAQqE,OAAQ,EAChBvB,EAAMuB,MAAQ,GAGd,MAAME,EAAgB,CACpBC,QAAS,CACP,kBAAmBC,KAAKC,UAAU,CAChClG,aAAc0E,EAAM3E,YAAYC,aAChCmG,eAAgBzB,EAAM3E,YAAYU,WAClC2F,UAAW1B,EAAM3E,YAAYY,MAC7B0F,cAAc,MAMdC,QAAiBC,EAAAA,EAAMC,KAAK,0CAChC,CACEC,SAAUzF,EAAU6E,MACpBa,MAAO1F,EAAU6E,MACjBQ,cAAc,GAEhBN,GAGF,GAAIO,EAASK,KAAKrC,MAChB,MAAM,IAAIsC,MAAMN,EAASK,KAAKE,SAAW,WAIvCP,EAASK,KAAKA,KAAKG,SAAWR,EAASK,KAAKA,KAAK7E,WAEnDD,EAAiBC,UAAYwE,EAASK,KAAKA,KAAK7E,UAChDD,EAAiBpB,WAAa6F,EAASK,KAAKA,KAAKlG,WACjDoB,EAAiBI,WAAY,IAAIqD,MAAOyB,UACxClF,EAAiBK,SAAWoE,EAASK,KAAKA,KAAKzE,SAE/C8E,EAAAA,GAAUC,QAAQ,aAGlBC,WAAW,KACT1E,KACC,OAGHG,EAAOkD,MAAQS,EAASK,KAAKA,KAE7BQ,IAGJ,CAAE,MAAOC,GACPC,QAAQ/C,MAAM,WAAY8C,GAC1B9C,EAAMuB,MAAQuB,EAAIP,SAAW,SAC/B,CAAE,QACArF,EAAQqE,OAAQ,CAClB,MA5DEvB,EAAMuB,MAAQ,sBANdmB,EAAAA,GAAUM,QAAQ,WAsEhB9E,EAAmBoD,UACvB,GAAK/D,EAAiBC,WAAcD,EAAiBpB,WAKrD,IACEgC,EAAeoD,OAAQ,EAGvB,MAAME,EAAgB,CACpBC,QAAS,CACP,kBAAmBC,KAAKC,UAAU,CAChClG,aAAc0E,EAAM3E,YAAYC,aAChCmG,eAAgBzB,EAAM3E,YAAYU,WAClC2F,UAAW1B,EAAM3E,YAAYY,UAM7B2F,QAAiBC,EAAAA,EAAMgB,IAC3B,mCAAmC1F,EAAiBpB,cAAcoB,EAAiBC,YACnFiE,GAGF,GAAIO,EAASK,KAAKrC,MAChB,MAAM,IAAIsC,MAAMN,EAASK,KAAKE,SAAW,YAI3ClE,EAAOkD,MAAQS,EAASK,KAAKA,KAGzBhE,EAAOkD,MAAMzC,aACf4D,EAAAA,GAAUC,QAAQ,WAClBE,IACAnC,EAAK,SAAUrC,EAAOkD,SAGtBmB,EAAAA,GAAUQ,KAAK,cAAc7E,EAAOkD,MAAMxC,UAG1C8B,EAAmB+B,WAAW1E,EAAkB,KAGpD,CAAE,MAAO4E,GACPC,QAAQ/C,MAAM,YAAa8C,GAC3B9C,EAAMuB,MAAQuB,EAAIP,SAAW,UAC/B,CAAE,QACApE,EAAeoD,OAAQ,CACzB,MAjDEmB,EAAAA,GAAUM,QAAQ,iBAqDhB5E,EAAmBA,KACnByC,IACFsC,aAAatC,GACbA,EAAmB,MAGrBgC,IACAH,EAAAA,GAAUQ,KAAK,eAIXL,EAAiBA,KACrBtF,EAAiBC,UAAY,GAC7BD,EAAiBpB,WAAa,GAC9BoB,EAAiBI,UAAY,KAC7BJ,EAAiBK,SAAW,IAIxB6B,EAAa6B,UACjB,GAAKjD,EAAOkD,OAAUlD,EAAOkD,MAAMpC,aAInC,UACQiE,UAAUC,UAAUC,UAAUjF,EAAOkD,MAAMpC,cACjDuD,EAAAA,GAAUC,QAAQ,UACpB,CAAE,MAAOG,GACPC,QAAQ/C,MAAM,QAAS8C,GACvBJ,EAAAA,GAAU1C,MAAM,OAClB,GAII3C,EAAYA,KAChBX,EAAU6E,MAAQ,GAClBlD,EAAOkD,MAAQ,KACfvB,EAAMuB,MAAQ,GACdsB,KAGF,MAAO,CACLnG,YACAQ,UACAiB,iBACAE,SACAd,mBACAyC,QACA/C,cACAiB,mBACAE,mBACAf,YACAoC,aACA/B,aACAxB,YAEJ,G,UC9VF,MAAMqH,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,uBCRA,IAAIC,EAAI,EAAQ,MACZC,EAAW,EAAQ,MACnBC,EAAoB,EAAQ,MAC5BC,EAAiB,EAAQ,MACzBC,EAA2B,EAAQ,MACnCC,EAAQ,EAAQ,MAEhBC,EAAsBD,EAAM,WAC9B,OAAoD,aAA7C,GAAGE,KAAKC,KAAK,CAAE7C,OAAQ,YAAe,EAC/C,GAII8C,EAAiC,WACnC,IAEE7D,OAAO8D,eAAe,GAAI,SAAU,CAAEC,UAAU,IAASJ,MAC3D,CAAE,MAAOhE,GACP,OAAOA,aAAiBqE,SAC1B,CACF,EAEIC,EAASP,IAAwBG,IAIrCT,EAAE,CAAE1F,OAAQ,QAASwG,OAAO,EAAMC,MAAO,EAAGC,OAAQH,GAAU,CAE5DN,KAAM,SAAcU,GAClB,IAAIC,EAAIjB,EAASkB,MACbC,EAAMlB,EAAkBgB,GACxBG,EAAWC,UAAU3D,OACzByC,EAAyBgB,EAAMC,GAC/B,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAUE,IAC5BL,EAAEE,GAAOE,UAAUC,GACnBH,IAGF,OADAjB,EAAee,EAAGE,GACXA,CACT,G,uBCvCF,IAAII,EAAU,EAAQ,MAKtBC,EAAOC,QAAUC,MAAMC,SAAW,SAAiBC,GACjD,MAA6B,UAAtBL,EAAQK,EACjB,C,uBCPA,IAAIC,EAAc,EAAQ,MACtBF,EAAU,EAAQ,MAElBG,EAAanB,UAEboB,EAA2BpF,OAAOoF,yBAGlCC,EAAoCH,IAAgB,WAEtD,QAAaI,IAATf,KAAoB,OAAO,EAC/B,IAEEvE,OAAO8D,eAAe,GAAI,SAAU,CAAEC,UAAU,IAAShD,OAAS,CACpE,CAAE,MAAOpB,GACP,OAAOA,aAAiBqE,SAC1B,CACF,CATwD,GAWxDa,EAAOC,QAAUO,EAAoC,SAAUf,EAAGvD,GAChE,GAAIiE,EAAQV,KAAOc,EAAyBd,EAAG,UAAUP,SACvD,MAAM,IAAIoB,EAAW,gCACrB,OAAOb,EAAEvD,OAASA,CACtB,EAAI,SAAUuD,EAAGvD,GACf,OAAOuD,EAAEvD,OAASA,CACpB,C,mBCzBA,IAAIoE,EAAanB,UACbuB,EAAmB,iBAEvBV,EAAOC,QAAU,SAAUU,GACzB,GAAIA,EAAKD,EAAkB,MAAMJ,EAAW,kCAC5C,OAAOK,CACT,C","sources":["webpack://client/./src/components/CozeWorkflowTester.vue","webpack://client/./src/components/CozeWorkflowTester.vue?b033","webpack://client/./node_modules/core-js/modules/es.array.push.js","webpack://client/./node_modules/core-js/internals/is-array.js","webpack://client/./node_modules/core-js/internals/array-set-length.js","webpack://client/./node_modules/core-js/internals/does-not-exceed-safe-integer.js"],"sourcesContent":["<template>\r\n  <div class=\"workflow-tester\">\r\n    <h3>Coze工作流测试</h3>\r\n    \r\n    <!-- API配置信息 -->\r\n    <div class=\"api-info\">\r\n      <el-alert\r\n        v-if=\"apiSettings && apiSettings.cozeApiToken\"\r\n        type=\"info\"\r\n        :closable=\"false\"\r\n        show-icon\r\n      >\r\n        当前使用配置：\r\n        <span v-if=\"apiSettings.cozeApiToken\">Token: {{ maskToken(apiSettings.cozeApiToken) }}</span>\r\n        <span v-if=\"apiSettings.workflowId\">，WorkflowID: {{ apiSettings.workflowId }}</span>\r\n        <span v-if=\"apiSettings.botId\">，BotID: {{ apiSettings.botId }}</span>\r\n      </el-alert>\r\n    </div>\r\n    \r\n    <!-- 输入区域，简化结构 -->\r\n    <div class=\"input-section\">\r\n      <div class=\"label\">输入关键词：</div>\r\n      <el-input\r\n        v-model=\"inputText\"\r\n        type=\"textarea\"\r\n        :rows=\"4\"\r\n        placeholder=\"请输入关键词，例如: 影刀RPA代做\"\r\n      />\r\n      <div class=\"button-group\">\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"runWorkflow\" \r\n          :loading=\"loading\"\r\n          :disabled=\"!apiSettings || !apiSettings.cozeApiToken || !apiSettings.workflowId\"\r\n        >\r\n          执行工作流\r\n        </el-button>\r\n        <el-button @click=\"clearForm\">清空</el-button>\r\n      </div>\r\n    </div>\r\n    \r\n    <el-divider content-position=\"center\">执行结果</el-divider>\r\n    \r\n    <!-- 异步执行状态显示 -->\r\n    <div v-if=\"asyncExecuteInfo.executeId\" class=\"async-status\">\r\n      <el-alert\r\n        type=\"info\"\r\n        :closable=\"false\"\r\n        show-icon\r\n      >\r\n        <p>异步工作流执行中...</p>\r\n        <p>执行ID: {{ asyncExecuteInfo.executeId }}</p>\r\n        <p>开始时间: {{ formatTime(asyncExecuteInfo.startTime) }}</p>\r\n        <p v-if=\"asyncExecuteInfo.debugUrl\">\r\n          <a :href=\"asyncExecuteInfo.debugUrl\" target=\"_blank\">查看调试页面</a>\r\n        </p>\r\n      </el-alert>\r\n      \r\n      <div class=\"async-actions\">\r\n        <el-button type=\"primary\" @click=\"checkAsyncResult\" :loading=\"checkingResult\">\r\n          检查执行结果\r\n        </el-button>\r\n        <el-button @click=\"cancelAsyncCheck\">取消</el-button>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 执行结果显示 -->\r\n    <div v-if=\"result\" class=\"execution-result\">\r\n      <el-descriptions title=\"执行信息\" :column=\"1\" border>\r\n        <el-descriptions-item label=\"状态\">\r\n          <el-tag :type=\"result.isCompleted ? 'success' : 'warning'\">\r\n            {{ result.status || '未知' }}\r\n          </el-tag>\r\n        </el-descriptions-item>\r\n        <el-descriptions-item v-if=\"result.createTime\" label=\"开始时间\">\r\n          {{ formatTime(result.createTime * 1000) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item v-if=\"result.updateTime\" label=\"结束时间\">\r\n          {{ formatTime(result.updateTime * 1000) }}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item v-if=\"result.debugUrl\" label=\"调试链接\">\r\n          <a :href=\"result.debugUrl\" target=\"_blank\">打开调试页面</a>\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n      \r\n      <el-card class=\"result-content\" v-if=\"result.parsedOutput\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span>输出结果</span>\r\n            <el-button size=\"small\" @click=\"copyOutput\">复制</el-button>\r\n          </div>\r\n        </template>\r\n        <div class=\"output-text\">{{ result.parsedOutput }}</div>\r\n      </el-card>\r\n      \r\n      <el-collapse v-if=\"result.output\" class=\"raw-output\">\r\n        <el-collapse-item title=\"原始输出\">\r\n          <pre>{{ result.output }}</pre>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n    \r\n    <!-- 空状态 -->\r\n    <el-empty \r\n      v-if=\"!asyncExecuteInfo.executeId && !result\" \r\n      description=\"还未执行工作流\"\r\n    />\r\n    \r\n    <!-- 错误显示 -->\r\n    <el-alert\r\n      v-if=\"error\"\r\n      type=\"error\"\r\n      :closable=\"true\"\r\n      show-icon\r\n      @close=\"error = ''\"\r\n      style=\"margin-top: 15px;\"\r\n    >\r\n      {{ error }}\r\n    </el-alert>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'CozeWorkflowTester',\r\n  props: {\r\n    apiSettings: {\r\n      type: Object,\r\n      required: true,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits: ['result'],\r\n  setup(props, { emit }) {\r\n    // 使用ref来存储输入文本，而不是reactive对象\r\n    const inputText = ref('');\r\n    \r\n    // 状态控制\r\n    const loading = ref(false);\r\n    const checkingResult = ref(false);\r\n    const error = ref('');\r\n    \r\n    // 结果相关\r\n    const result = ref(null);\r\n    const asyncExecuteInfo = reactive({\r\n      executeId: '',\r\n      workflowId: '',\r\n      startTime: null,\r\n      debugUrl: ''\r\n    });\r\n    \r\n    // 检查结果的计时器\r\n    let resultCheckTimer = null;\r\n    \r\n    // 格式化时间\r\n    const formatTime = (timestamp) => {\r\n      if (!timestamp) return '-';\r\n      const date = new Date(timestamp);\r\n      return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\r\n    };\r\n    \r\n    // 掩码显示令牌\r\n    const maskToken = (token) => {\r\n      if (!token) return '';\r\n      if (token.length <= 10) return token;\r\n      return token.substring(0, 5) + '...' + token.substring(token.length - 5);\r\n    };\r\n    \r\n    // 执行工作流\r\n    const runWorkflow = async () => {\r\n      // 验证输入\r\n      if (!inputText.value.trim()) {\r\n        ElMessage.warning('请输入关键词');\r\n        return;\r\n      }\r\n      \r\n      // 验证API设置\r\n      if (!props.apiSettings || !props.apiSettings.cozeApiToken || !props.apiSettings.workflowId) {\r\n        error.value = '请先配置Coze API设置';\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        loading.value = true;\r\n        error.value = '';\r\n        \r\n        // 构建请求配置\r\n        const requestConfig = {\r\n          headers: {\r\n            'X-Coze-Settings': JSON.stringify({\r\n              cozeApiToken: props.apiSettings.cozeApiToken,\r\n              cozeWorkflowId: props.apiSettings.workflowId,\r\n              cozeBotId: props.apiSettings.botId,\r\n              useAsyncMode: true // 强制使用异步模式\r\n            })\r\n          }\r\n        };\r\n        \r\n        // 调用API，将keywords参数改为input\r\n        const response = await axios.post('/api/test-coze-api/generate-description', \r\n          { \r\n            keywords: inputText.value, // 后端接口仍然使用keywords\r\n            input: inputText.value,     // 添加input参数 \r\n            useAsyncMode: true     // 显式指定使用异步模式\r\n          }, \r\n          requestConfig\r\n        );\r\n        \r\n        if (response.data.error) {\r\n          throw new Error(response.data.message || '执行工作流失败');\r\n        }\r\n        \r\n        // 处理异步执行\r\n        if (response.data.data.isAsync && response.data.data.executeId) {\r\n          // 记录异步执行信息\r\n          asyncExecuteInfo.executeId = response.data.data.executeId;\r\n          asyncExecuteInfo.workflowId = response.data.data.workflowId;\r\n          asyncExecuteInfo.startTime = new Date().getTime();\r\n          asyncExecuteInfo.debugUrl = response.data.data.debugUrl;\r\n          \r\n          ElMessage.success('工作流开始异步执行');\r\n          \r\n          // 5秒后自动检查一次结果\r\n          setTimeout(() => {\r\n            checkAsyncResult();\r\n          }, 5000);\r\n        } else {\r\n          // 同步执行结果\r\n          result.value = response.data.data;\r\n          // 清空异步信息\r\n          resetAsyncInfo();\r\n        }\r\n        \r\n      } catch (err) {\r\n        console.error('执行工作流出错:', err);\r\n        error.value = err.message || '执行工作流失败';\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 检查异步执行结果\r\n    const checkAsyncResult = async () => {\r\n      if (!asyncExecuteInfo.executeId || !asyncExecuteInfo.workflowId) {\r\n        ElMessage.warning('没有正在执行的异步工作流');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        checkingResult.value = true;\r\n        \r\n        // 构建请求配置\r\n        const requestConfig = {\r\n          headers: {\r\n            'X-Coze-Settings': JSON.stringify({\r\n              cozeApiToken: props.apiSettings.cozeApiToken,\r\n              cozeWorkflowId: props.apiSettings.workflowId,\r\n              cozeBotId: props.apiSettings.botId\r\n            })\r\n          }\r\n        };\r\n        \r\n        // 调用查询API\r\n        const response = await axios.get(\r\n          `/api/test-coze-api/async-result/${asyncExecuteInfo.workflowId}/${asyncExecuteInfo.executeId}`,\r\n          requestConfig\r\n        );\r\n        \r\n        if (response.data.error) {\r\n          throw new Error(response.data.message || '查询执行结果失败');\r\n        }\r\n        \r\n        // 更新结果\r\n        result.value = response.data.data;\r\n        \r\n        // 判断是否完成\r\n        if (result.value.isCompleted) {\r\n          ElMessage.success('工作流执行完成');\r\n          resetAsyncInfo();\r\n          emit('result', result.value);\r\n        } else {\r\n          // 如果未完成，设置定时检查\r\n          ElMessage.info(`工作流执行中，状态: ${result.value.status}`);\r\n          \r\n          // 每10秒检查一次结果，直到完成\r\n          resultCheckTimer = setTimeout(checkAsyncResult, 10000);\r\n        }\r\n        \r\n      } catch (err) {\r\n        console.error('检查异步结果失败:', err);\r\n        error.value = err.message || '检查执行结果失败';\r\n      } finally {\r\n        checkingResult.value = false;\r\n      }\r\n    };\r\n    \r\n    // 取消异步检查\r\n    const cancelAsyncCheck = () => {\r\n      if (resultCheckTimer) {\r\n        clearTimeout(resultCheckTimer);\r\n        resultCheckTimer = null;\r\n      }\r\n      \r\n      resetAsyncInfo();\r\n      ElMessage.info('已取消异步工作流检查');\r\n    };\r\n    \r\n    // 重置异步信息\r\n    const resetAsyncInfo = () => {\r\n      asyncExecuteInfo.executeId = '';\r\n      asyncExecuteInfo.workflowId = '';\r\n      asyncExecuteInfo.startTime = null;\r\n      asyncExecuteInfo.debugUrl = '';\r\n    };\r\n    \r\n    // 复制输出结果\r\n    const copyOutput = async () => {\r\n      if (!result.value || !result.value.parsedOutput) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        await navigator.clipboard.writeText(result.value.parsedOutput);\r\n        ElMessage.success('已复制到剪贴板');\r\n      } catch (err) {\r\n        console.error('复制失败:', err);\r\n        ElMessage.error('复制失败');\r\n      }\r\n    };\r\n    \r\n    // 清空表单\r\n    const clearForm = () => {\r\n      inputText.value = '';\r\n      result.value = null;\r\n      error.value = '';\r\n      resetAsyncInfo();\r\n    };\r\n    \r\n    return {\r\n      inputText,\r\n      loading,\r\n      checkingResult,\r\n      result,\r\n      asyncExecuteInfo,\r\n      error,\r\n      runWorkflow,\r\n      checkAsyncResult,\r\n      cancelAsyncCheck,\r\n      clearForm,\r\n      copyOutput,\r\n      formatTime,\r\n      maskToken\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.workflow-tester {\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.api-info {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.input-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  line-height: 40px;\r\n  font-weight: 500;\r\n}\r\n\r\n.button-group {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.async-status {\r\n  margin: 15px 0;\r\n}\r\n\r\n.async-actions {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.execution-result {\r\n  margin-top: 20px;\r\n}\r\n\r\n.result-content {\r\n  margin: 15px 0;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.output-text {\r\n  white-space: pre-line;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.raw-output {\r\n  margin-top: 15px;\r\n}\r\n\r\n.raw-output pre {\r\n  white-space: pre-wrap;\r\n  font-size: 12px;\r\n  background-color: #f8f8f8;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  overflow-x: auto;\r\n}\r\n</style> ","import { render } from \"./CozeWorkflowTester.vue?vue&type=template&id=1a8587c9&scoped=true\"\nimport script from \"./CozeWorkflowTester.vue?vue&type=script&lang=js\"\nexport * from \"./CozeWorkflowTester.vue?vue&type=script&lang=js\"\n\nimport \"./CozeWorkflowTester.vue?vue&type=style&index=0&id=1a8587c9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a8587c9\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$props","apiSettings","cozeApiToken","_createBlock","_component_el_alert","type","closable","_hoisted_3","_toDisplayString","$setup","maskToken","workflowId","_hoisted_4","botId","_hoisted_5","_hoisted_6","_createVNode","_component_el_input","inputText","$event","rows","placeholder","_hoisted_7","_component_el_button","onClick","runWorkflow","loading","disabled","_cache","clearForm","_component_el_divider","asyncExecuteInfo","executeId","_hoisted_8","formatTime","startTime","debugUrl","_hoisted_9","href","target","_hoisted_10","_hoisted_11","checkAsyncResult","checkingResult","cancelAsyncCheck","result","_hoisted_12","_component_el_descriptions","title","column","border","_component_el_descriptions_item","label","_component_el_tag","isCompleted","status","createTime","updateTime","_hoisted_13","parsedOutput","_component_el_card","header","_withCtx","_hoisted_14","size","copyOutput","_hoisted_15","output","_component_el_collapse","_component_el_collapse_item","_component_el_empty","description","error","onClose","style","name","props","Object","required","default","emits","setup","emit","ref","reactive","resultCheckTimer","timestamp","date","Date","toLocaleDateString","toLocaleTimeString","token","length","substring","async","value","trim","requestConfig","headers","JSON","stringify","cozeWorkflowId","cozeBotId","useAsyncMode","response","axios","post","keywords","input","data","Error","message","isAsync","getTime","ElMessage","success","setTimeout","resetAsyncInfo","err","console","warning","get","info","clearTimeout","navigator","clipboard","writeText","__exports__","render","$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","properErrorOnNonWritableLength","defineProperty","writable","TypeError","FORCED","proto","arity","forced","item","O","this","len","argCount","arguments","i","classof","module","exports","Array","isArray","argument","DESCRIPTORS","$TypeError","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","undefined","MAX_SAFE_INTEGER","it"],"sourceRoot":""}