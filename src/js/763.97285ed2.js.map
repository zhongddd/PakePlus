{"version":3,"file":"js/763.97285ed2.js","mappings":"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","sources":["webpack://client/./src/utils/api.js","webpack://client/./src/views/Shops.vue","webpack://client/./src/views/Shops.vue?ade8"],"sourcesContent":["import axios from './axios';\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  register: (userData) => axios.post('/api/auth/register', userData),\r\n  login: (credentials) => axios.post('/api/auth/login', credentials),\r\n  getMe: () => axios.get('/api/auth/me')\r\n};\r\n\r\n// Shop API\r\nexport const shopAPI = {\r\n  getShops: () => axios.get('/api/shops'),\r\n  addShop: (shopData) => axios.post('/api/shops', shopData),\r\n  getShop: (id) => axios.get(`/api/shops/${id}`),\r\n  updateShop: (id, shopData) => axios.put(`/api/shops/${id}`, shopData),\r\n  deleteShop: (id) => axios.delete(`/api/shops/${id}`),\r\n  queryShopInfo: (id) => axios.post(`/api/shops/${id}/query`),\r\n  getShopAuthorize: (id) => axios.get(`/api/shops/${id}/authorize`)\r\n};\r\n\r\n// Image Categories API\r\nexport const imageCategoryAPI = {\r\n  getCategories: () => axios.get('/api/image-categories'),\r\n  addCategory: (categoryData) => axios.post('/api/image-categories', categoryData),\r\n  deleteCategory: (id, options = {}) => axios.delete(`/api/image-categories/${id}`, { params: options })\r\n};\r\n\r\n// Images API\r\nexport const imageAPI = {\r\n  getImages: (params) => axios.get('/api/images', { params }),\r\n  uploadImage: (formData) => axios.post('/api/images/upload', formData, {\r\n    headers: { 'Content-Type': 'multipart/form-data' }\r\n  }),\r\n  compressImage: (imageId) => axios.post('/api/images/compress', { imageId })\r\n};\r\n\r\n// Description API\r\nexport const descriptionAPI = {\r\n  generateDescription: (keywords, config = {}) => axios.post('/api/descriptions/generate', { keywords }, config),\r\n  generateDescriptionAsync: (keywords, config = {}) => axios.post('/api/descriptions/generate', { keywords, useAsyncMode: true }, config),\r\n  checkAsyncResult: (workflowId, executeId, config = {}) => axios.get(`/api/descriptions/async-result/${workflowId}/${executeId}`, config)\r\n};\r\n\r\n// Products API\r\nexport const productAPI = {\r\n  createProduct: (productData) => axios.post('/api/products', productData),\r\n  publishProduct: (id, publishData) => axios.post(`/api/products/${id}/publish`, publishData),\r\n  deleteProduct: (id) => axios.delete(`/api/products/${id}`),\r\n  testPublishProduct: (id, testData) => axios.post(`/api/products/${id}/test-publish`, testData)\r\n};\r\n\r\n// Dashboard API\r\nexport const dashboardAPI = {\r\n  getStats: () => axios.get('/api/dashboard')\r\n};\r\n\r\n// Coze API Test\r\nexport const cozeAPI = {\r\n  testConnection: (testData) => axios.post('/api/test-coze-api', testData)\r\n}; ","<template>\n  <div class=\"shops-container\">\n    <el-card>\n      <template #header>\n        <div class=\"card-header\">\n          <span>店铺列表</span>\n          <el-button type=\"primary\" @click=\"dialogVisible = true\">添加店铺</el-button>\n        </div>\n      </template>\n      \n      <el-table :data=\"shops\" v-loading=\"loading\" style=\"width: 100%\">\n        <el-table-column prop=\"shop_name\" label=\"店铺名称\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"seller_id\" label=\"卖家ID\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"app_key\" label=\"AppKey\" width=\"180\">\n          <template #default=\"scope\">\n            <span>{{ maskText(scope.row.app_key) }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"created_at\" label=\"创建时间\"></el-table-column>\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" type=\"success\" @click=\"queryShop(scope.row)\">查询</el-button>\n            <el-button size=\"small\" type=\"primary\" @click=\"editShop(scope.row)\">编辑</el-button>\n            <el-button size=\"small\" type=\"danger\" @click=\"confirmDeleteShop(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <!-- 添加/编辑店铺对话框 -->\n    <el-dialog\n      v-model=\"dialogVisible\"\n      :title=\"isEdit ? '编辑店铺' : '添加店铺'\"\n      width=\"500px\"\n    >\n      <el-form :model=\"shopForm\" label-width=\"100px\" :rules=\"rules\" ref=\"shopFormRef\">\n        <el-form-item label=\"店铺名称\" prop=\"shop_name\">\n          <el-input v-model=\"shopForm.shop_name\" placeholder=\"请输入店铺名称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"卖家ID\" prop=\"seller_id\">\n          <el-input v-model=\"shopForm.seller_id\" placeholder=\"请输入卖家ID\"></el-input>\n          <div class=\"form-tip\">注：商务对接时必填</div>\n        </el-form-item>\n        <el-form-item label=\"AppKey\" prop=\"app_key\">\n          <el-input v-model=\"shopForm.app_key\" placeholder=\"请输入AppKey\"></el-input>\n          <div class=\"form-tip\">注：闲鱼开放平台提供的应用KEY</div>\n        </el-form-item>\n        <el-form-item label=\"AppSecret\" prop=\"app_secret\">\n          <el-input v-model=\"shopForm.app_secret\" placeholder=\"请输入AppSecret\" type=\"password\" show-password></el-input>\n          <div class=\"form-tip\">注：闲鱼开放平台提供的应用密钥</div>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitShopForm\" :loading=\"submitting\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n    <!-- 查询店铺信息结果 -->\n    <el-dialog v-model=\"queryDialogVisible\" title=\"闲鱼店铺信息\" width=\"700px\">\n      <div v-if=\"queryLoading\" class=\"query-loading\">\n        <el-skeleton :rows=\"5\" animated />\n      </div>\n      <div v-else-if=\"queryError\" class=\"query-error\">\n        <el-alert\n          title=\"查询失败\"\n          type=\"error\"\n          :description=\"queryError\"\n          show-icon\n        />\n      </div>\n      <div v-else>\n        <el-alert\n          v-if=\"queryResult.shops && queryResult.shops.length > 0\"\n          title=\"查询成功\"\n          type=\"success\"\n          description=\"已成功获取闲鱼店铺授权信息\"\n          show-icon\n          :closable=\"false\"\n          style=\"margin-bottom: 15px\"\n        />\n        \n        <p v-if=\"queryResult.total > 1\" class=\"query-count\">\n          发现 {{ queryResult.total }} 个授权店铺\n        </p>\n        \n        <el-table :data=\"queryResult.shops\" border style=\"width: 100%\">\n          <el-table-column prop=\"shop_name\" label=\"店铺名称\" min-width=\"120\"></el-table-column>\n          <el-table-column prop=\"user_name\" label=\"会员名\" min-width=\"120\"></el-table-column>\n          <el-table-column prop=\"user_nick\" label=\"昵称\" min-width=\"120\"></el-table-column>\n          <el-table-column prop=\"is_pro\" label=\"鱼小铺\">\n            <template #default=\"scope\">\n              <el-tag :type=\"scope.row.is_pro ? 'success' : 'info'\">\n                {{ scope.row.is_pro ? '已开通' : '未开通' }}\n              </el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"is_valid\" label=\"订购状态\">\n            <template #default=\"scope\">\n              <el-tag :type=\"scope.row.is_valid ? 'success' : 'danger'\">\n                {{ scope.row.is_valid ? '有效' : '无效' }}\n              </el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"valid_end_time\" label=\"有效期\">\n            <template #default=\"scope\">\n              {{ formatTimestamp(scope.row.valid_end_time) }}\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { shopAPI } from '../utils/api'\n\n// 添加自定义事件，用于通知其他组件店铺信息更新\nconst shopUpdateEvent = new Event('shop-auth-updated');\n\nexport default {\n  name: 'ShopsPage',\n  setup() {\n    const loading = ref(false)\n    const shops = ref([])\n    const dialogVisible = ref(false)\n    const isEdit = ref(false)\n    const currentShopId = ref(null)\n    const submitting = ref(false)\n    const shopFormRef = ref(null)\n    \n    // 查询相关\n    const queryDialogVisible = ref(false)\n    const queryLoading = ref(false)\n    const queryError = ref('')\n    const queryResult = ref({})\n\n    const shopForm = reactive({\n      shop_name: '',\n      seller_id: '',\n      app_key: '',\n      app_secret: ''\n    })\n\n    const rules = {\n      shop_name: [\n        { required: true, message: '请输入店铺名称', trigger: 'blur' }\n      ],\n      app_key: [\n        { required: true, message: '请输入AppKey', trigger: 'blur' }\n      ],\n      app_secret: [\n        { required: true, message: '请输入AppSecret', trigger: 'blur' }\n      ]\n    }\n\n    const fetchShops = async () => {\n      loading.value = true\n      try {\n        const response = await shopAPI.getShops()\n        shops.value = Array.isArray(response.data.data) ? response.data.data : []\n      } catch (error) {\n        console.error('获取店铺列表失败:', error)\n        ElMessage.error('获取店铺列表失败')\n        shops.value = [] // 确保在错误情况下shops仍然是一个数组\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const resetForm = () => {\n      shopForm.shop_name = ''\n      shopForm.seller_id = ''\n      shopForm.app_key = ''\n      shopForm.app_secret = ''\n      currentShopId.value = null\n    }\n\n    const editShop = (shop) => {\n      isEdit.value = true\n      currentShopId.value = shop.id\n      shopForm.shop_name = shop.shop_name\n      shopForm.seller_id = shop.seller_id\n      shopForm.app_key = shop.app_key\n      shopForm.app_secret = '' // 出于安全考虑，不回显密钥\n      dialogVisible.value = true\n    }\n\n    const addShop = async () => {\n      if (!shopFormRef.value) return\n      \n      try {\n        await shopFormRef.value.validate()\n        \n        submitting.value = true\n        \n        const shopData = {\n          app_key: shopForm.app_key,\n          app_secret: shopForm.app_secret,\n          shop_name: shopForm.shop_name,\n          seller_id: shopForm.seller_id\n        }\n        \n        await shopAPI.addShop(shopData)\n        \n        ElMessage.success('店铺添加成功')\n        dialogVisible.value = false\n        resetForm()\n        fetchShops()\n      } catch (error) {\n        console.error('添加店铺失败:', error)\n        ElMessage.error(error.response?.data?.message || '添加店铺失败')\n      } finally {\n        submitting.value = false\n      }\n    }\n\n    const updateShop = async () => {\n      if (!shopFormRef.value) return\n      \n      try {\n        await shopFormRef.value.validate()\n        \n        submitting.value = true\n        \n        const shopData = {\n          app_key: shopForm.app_key,\n          app_secret: shopForm.app_secret,\n          shop_name: shopForm.shop_name,\n          seller_id: shopForm.seller_id\n        }\n        \n        await shopAPI.updateShop(currentShopId.value, shopData)\n        \n        ElMessage.success('店铺更新成功')\n        dialogVisible.value = false\n        fetchShops()\n      } catch (error) {\n        console.error('更新店铺失败:', error)\n        ElMessage.error(error.response?.data?.message || '更新店铺失败')\n      } finally {\n        submitting.value = false\n      }\n    }\n\n    const confirmDeleteShop = (shop) => {\n      ElMessageBox.confirm(\n        `确定要删除店铺 \"${shop.shop_name}\" 吗？`,\n        '警告',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(() => {\n        deleteShop(shop.id)\n      }).catch(() => {})\n    }\n\n    const deleteShop = async (id) => {\n      try {\n        await ElMessageBox.confirm(\n          '删除店铺将会同时删除相关的发布计划，确定要删除吗？',\n          '警告',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n        \n        await shopAPI.deleteShop(id)\n        \n        ElMessage.success('店铺删除成功')\n        fetchShops()\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('删除店铺失败:', error)\n          ElMessage.error(error.response?.data?.message || '删除店铺失败')\n        }\n      }\n    }\n\n    const formatTimestamp = (timestamp) => {\n      if (!timestamp || timestamp === 0) return '无';\n      const date = new Date(timestamp * 1000);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      });\n    };\n\n    const queryShop = async (shop) => {\n      queryDialogVisible.value = true;\n      queryLoading.value = true;\n      queryError.value = '';\n      queryResult.value = {};\n      \n      try {\n        const response = await shopAPI.queryShopInfo(shop.id);\n        ElMessage.success('店铺信息查询成功');\n        queryResult.value = response.data.data;\n        \n        // 将查询到的店铺信息保存到localStorage\n        if (queryResult.value.shops && queryResult.value.shops.length > 0) {\n          localStorage.setItem('authorizedShops', JSON.stringify(queryResult.value.shops));\n          // 触发自定义事件，通知其他组件（如仪表盘）店铺信息已更新\n          window.dispatchEvent(shopUpdateEvent);\n          ElMessage.success('授权店铺信息已保存，可在快速发布页面中使用');\n        }\n      } catch (error) {\n        console.error('查询店铺信息失败:', error);\n        queryError.value = error.response?.data?.message || '查询店铺信息失败';\n      } finally {\n        queryLoading.value = false;\n      }\n    };\n\n    const maskText = (text) => {\n      if (!text) return ''\n      if (text.length <= 4) return text\n      return text.substring(0, 4) + '****' + text.substring(text.length - 4)\n    }\n\n    const submitShopForm = () => {\n      if (isEdit.value) {\n        updateShop();\n      } else {\n        addShop();\n      }\n    };\n\n    onMounted(() => {\n      fetchShops()\n    })\n\n    return {\n      loading,\n      shops,\n      dialogVisible,\n      isEdit,\n      shopForm,\n      rules,\n      submitting,\n      shopFormRef,\n      queryDialogVisible,\n      queryLoading,\n      queryError,\n      queryResult,\n      editShop,\n      addShop,\n      updateShop,\n      confirmDeleteShop,\n      deleteShop,\n      queryShop,\n      maskText,\n      formatTimestamp,\n      submitShopForm\n    }\n  }\n}\n</script>\n\n<style scoped>\n.shops-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.query-loading, .query-error {\n  padding: 20px;\n}\n\n.query-count {\n  margin-bottom: 15px;\n  color: #67c23a;\n  font-weight: bold;\n}\n\n.form-tip {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n</style> ","import { render } from \"./Shops.vue?vue&type=template&id=080b34bf&scoped=true\"\nimport script from \"./Shops.vue?vue&type=script&lang=js\"\nexport * from \"./Shops.vue?vue&type=script&lang=js\"\n\nimport \"./Shops.vue?vue&type=style&index=0&id=080b34bf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-080b34bf\"]])\n\nexport default __exports__"],"names":["shopAPI","getShops","axios","get","addShop","shopData","post","getShop","id","updateShop","put","deleteShop","delete","queryShopInfo","getShopAuthorize","imageCategoryAPI","getCategories","addCategory","categoryData","deleteCategory","options","params","imageAPI","getImages","uploadImage","formData","headers","compressImage","imageId","descriptionAPI","generateDescription","keywords","config","generateDescriptionAsync","useAsyncMode","checkAsyncResult","workflowId","executeId","dashboardAPI","getStats","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_createElementVNode","_hoisted_2","_component_el_button","type","onClick","_cache","$event","$setup","dialogVisible","_createBlock","_component_el_table","data","shops","style","_component_el_table_column","prop","label","width","default","scope","_toDisplayString","maskText","row","app_key","size","queryShop","editShop","confirmDeleteShop","loading","_component_el_dialog","title","isEdit","footer","_hoisted_3","submitShopForm","submitting","_component_el_form","model","shopForm","rules","ref","_component_el_form_item","_component_el_input","shop_name","placeholder","seller_id","app_secret","queryDialogVisible","queryLoading","_hoisted_4","_component_el_skeleton","rows","animated","queryError","_hoisted_5","_component_el_alert","description","_hoisted_6","queryResult","length","closable","total","_hoisted_7","border","_component_el_tag","is_pro","is_valid","formatTimestamp","valid_end_time","shopUpdateEvent","Event","name","setup","currentShopId","shopFormRef","reactive","required","message","trigger","fetchShops","async","value","response","Array","isArray","error","console","ElMessage","resetForm","shop","validate","success","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","catch","timestamp","date","Date","toLocaleDateString","year","month","day","localStorage","setItem","JSON","stringify","window","dispatchEvent","text","substring","onMounted","__exports__","render"],"sourceRoot":""}